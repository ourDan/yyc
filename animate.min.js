var animate = function() { //定义一个 全局的函数 。。。 
    
    function makeArr(t) {
        return Array.isArray(t) ? t : Array.prototype.slice.call(t)  // t是数组 ？ 是 就返回，不是 切成数组再说
    }

    var n = function(t) { // 这个是干嘛的？  
            
            var n = t.length;  // 传进来一个 t , 得出长度，t是array ，

            return function e() {  // 说白了 n就是 一个 

                    for(var r = arguments.length, u = Array(r) , a = 0; r > a; a++){
                        u[a] = arguments[a];  // 把传入的arguments 再次复制一下？ 嗯
                    }

                    return u.length < n ?  

                        function() {
                            for (var t = arguments.length, n = Array(t), r = 0; t > r; r++){
                                n[r] = arguments[r];
                            }
                            return e.apply(void 0, u.concat(n))
                        } 
                        : t.apply(void 0, u) // 看看 u ,究竟 有没有搞过 
            
            }
        }, 

    e = function() {
            for (var t = arguments.length, n = Array(t), e = 0; t > e; e++){
                n[e] = arguments[e];
            }
            return function(t) {
                return n.reduce(function(t, n) {
                    return n(t)
                }, t)
            }
        }, 
    r = function(t) {
        return function() {
            return !t.apply(void 0, arguments)
        }
    }, 

    u = {
        linear: function(t, n, e, r) {
                return n + t / r * e
            },
        easeInQuad: function(t, n, e, r) {
            return e * (t /= r) * t + n
            },
        easeInCubic: function(t, n, e, r) {
            return e * (t /= r) * t * t + n
            },
        easeInQuart: function(t, n, e, r) {
            return e * (t /= r) * t * t * t + n
            },
        easeInQuint: function(t, n, e, r) {
            return e * (t /= r) * t * t * t * t + n
            },
        easeInSine: function(t, n, e, r) {
            return -e * Math.cos(t / r * (Math.PI / 2)) + e + n
            },
        easeInExpo: function(t, n, e, r) {
            return 0 == t ? n : e * Math.pow(2, 10 * (t / r - 1)) + n
            },
        easeInCirc: function(t, n, e, r) {
            return -e * (Math.sqrt(1 - (t /= r) * t) - 1) + n
            },
        easeInElastic: function(t, n, e, r) {
            var u = 4 >= arguments.length || void 0 === arguments[4] ? 500 : arguments[4];
            if (0 == t)
                return n;
            if (1 == (t /= r))
                return n + e;
            var u = r * (1 - Math.min(u, 999) / 1e3), a = e < Math.abs(e) ? u / 4 : u / (2 * Math.PI) * Math.asin(e / e);
            return -(e * Math.pow(2, 10 * --t) * Math.sin(2 * (t * r - a) * Math.PI / u)) + n
            },
        easeInBack: function(t, n, e, r) {
            return e * (t /= r) * t * (2.70158 * t - 1.70158) + n
            },
        easeOutQuad: function(t, n, e, r) {
            return -e * (t /= r) * (t - 2) + n
            },
        easeOutCubic: function(t, n, e, r) {
            return e * ((t = t / r - 1) * t * t + 1) + n
            },
        easeOutQuart: function(t, n, e, r) {
            return -e * ((t = t / r - 1) * t * t * t - 1) + n
            },
        easeOutQuint: function(t, n, e, r) {
            return e * ((t = t / r - 1) * t * t * t * t + 1) + n
            },
        easeOutSine: function(t, n, e, r) {
            return e * Math.sin(t / r * (Math.PI / 2)) + n
        },
        easeOutExpo: function(t, n, e, r) {
            return t == r ? n + e : e * (-Math.pow(2, -10 * t / r) + 1) + n
        },
        easeOutCirc: function(t, n, e, r) {
            return e * Math.sqrt(1 - (t = t / r - 1) * t) + n
        },
        easeOutElastic: function(t, n, e, r) {
            var u = 4 >= arguments.length || void 0 === arguments[4] ? 500 : arguments[4];
            if (0 == t)
                return n;
            if (1 == (t /= r))
                return n + e;
            var u = r * (1 - Math.min(u, 999) / 1e3), a = e < Math.abs(e) ? u / 4 : u / (2 * Math.PI) * Math.asin(e / e);
            return e * Math.pow(2, -10 * t) * Math.sin(2 * (t * r - a) * Math.PI / u) + e + n
        },
        easeOutBack: function(t, n, e, r) {
            return e * ((t = t / r - 1) * t * (2.70158 * t + 1.70158) + 1) + n
        },
        easeOutBounce: function(t, n, e, r) {
            return (t /= r) < 1 / 2.75 ? 7.5625 * e * t * t + n : 2 / 2.75 > t ? e * (7.5625 * (t -= 1.5 / 2.75) * t + .75) + n : 2.5 / 2.75 > t ? e * (7.5625 * (t -= 2.25 / 2.75) * t + .9375) + n : e * (7.5625 * (t -= 2.625 / 2.75) * t + .984375) + n
        },
        easeInOutQuad: function(t, n, e, r) {
            return 1 > (t /= r / 2) ? e / 2 * t * t + n : -e / 2 * (--t * (t - 2) - 1) + n
        },
        easeInOutCubic: function(t, n, e, r) {
            return 1 > (t /= r / 2) ? e / 2 * t * t * t + n : e / 2 * ((t -= 2) * t * t + 2) + n
        },easeInOutQuart: function(t, n, e, r) {
            return 1 > (t /= r / 2) ? e / 2 * t * t * t * t + n : -e / 2 * ((t -= 2) * t * t * t - 2) + n
        },easeInOutQuint: function(t, n, e, r) {
            return 1 > (t /= r / 2) ? e / 2 * t * t * t * t * t + n : e / 2 * ((t -= 2) * t * t * t * t + 2) + n
        },easeInOutSine: function(t, n, e, r) {
            return -e / 2 * (Math.cos(Math.PI * t / r) - 1) + n
        },easeInOutExpo: function(t, n, e, r) {
            return 0 == t ? n : t == r ? n + e : 1 > (t /= r / 2) ? e / 2 * Math.pow(2, 10 * (t - 1)) + n : e / 2 * (-Math.pow(2, -10 * --t) + 2) + n
        },easeInOutCirc: function(t, n, e, r) {
            return 1 > (t /= r / 2) ? -e / 2 * (Math.sqrt(1 - t * t) - 1) + n : e / 2 * (Math.sqrt(1 - (t -= 2) * t) + 1) + n
        },easeInOutElastic: function(t, n, e, r) {
            var u = 4 >= arguments.length || void 0 === arguments[4] ? 500 : arguments[4];
            if (0 == t)
                return n;
            if (2 == (t /= r / 2))
                return n + e;
            var u = r * (1 - Math.min(u, 999) / 1e3) * 1.5, a = e < Math.abs(e) ? u / 4 : u / (2 * Math.PI) * Math.asin(e / e);
            return 1 > t ? -.5 * e * Math.pow(2, 10 * --t) * Math.sin(2 * (t * r - a) * Math.PI / u) + n : e * Math.pow(2, -10 * --t) * Math.sin(2 * (t * r - a) * Math.PI / u) * .5 + e + n
        },easeInOutBack: function(t, n, e, r) {
            var u = 1.70158;
            return 1 > (t /= r / 2) ? e / 2 * t * t * (((u *= 1.525) + 1) * t - u) + n : e / 2 * ((t -= 2) * t * (((u *= 1.525) + 1) * t + u) + 2) + n
        }
    },
    a = function(t) {
        return t[0]
    }, 
    i = function(t) {
        return t.reduce(function(t, n) {
            return t.concat(n)
        })
    }, 
    o = function() {
        return Array.prototype.includes ? function(t, n) {
            return t.includes(n)
        } : function(t, n) {
            return t.some(function(t) {
                return t === n
            })
        }
    }(),
    c = function(t) {
        for (var n = arguments.length, e = Array(n > 1 ? n - 1 : 0), u = 1; n > u; u++)
            e[u - 1] = arguments[u];
        var a = i(e);
        return t.filter(function(t) {
            return r(o)(a, t)
        })
    }, 
    s = function() {
        return Array.from ? function(t) {
            return Array.from(t.keys())
        } : function(t) {
            var n = [];
            return t.forEach(function(t, e) {
                return n.push(e)
            }), n
        }
    }(), 
    f = function() {
        var t = function(t) {
            var n = new Map;
            return Object.keys(t).forEach(function(e) {
                return n.set(e, t[e])
            }), n
        };
        return function(n) {
            return n instanceof Map ? n : t(n)
        }
    }(), 
    g = function() {
        try {
            if (!new Map((new Map).set(null, null)).size)
                throw Error()
        } catch (t) {
            return function(t) {
                var n = new Map;
                return t.forEach(function(t, e) {
                    return n.set(e, t)
                }), n
            }
        }
        return function(t) {
            return new Map(t)
        }
    }(), 
    l = function(t) {
        return /^#/.test(t)
    },
    p = function(t) {
        return /^rgb/.test(t)
    }, 
    h = function() {
        var t = function(t) {
            return 7 > t.length ? t.split("").reduce(function(t, n) {
                return t + n + n
            }) : t
        }, n = function(t) {
            return t.match(/[\d\w]{2}/g).map(function(t) {
                return parseInt(t, 16)
            })
        };
        return function(r) {
            return p(r) ? r : (r = e(t, n)(r), "rgb(" + r[0] + ", " + r[1] + ", " + r[2] + ")")
        }
    }(),
    v = function(n) {
        return n = "string" == typeof n ? /^[\#.]?[\w-]+$/.test(n) ? "." == n[0] ? document.getElementsByClassName(n.slice(1)) : "#" == n[0] ? document.getElementById(n.slice(1)) : document.getElementsByTagName(n) : document.querySelectorAll(n) : n, Array.isArray(n) ? n : n.nodeType ? [n] : n instanceof NodeList || n instanceof HTMLCollection ? [].concat(t(n)) : n.get()
    }, 
    m = new Map;
    "el delay begin complete loop direction".split(" ").forEach(function(t) {
        return m.set(t, null)
    }), 
    m.set("duration", 1e3), 
    m.set("easing", "easeOutElastic");


    var d = function() {
        var t = s(m).filter(function(t) {
            return m.get(t)
        }), n = function(n) {
            return t.every(function(t) {
                return n.has(t)
            })
        }, e = function(n) {
            var e = g(n);
            return t.forEach(function(t) {
                e.has(t) || e.set(t, m.get(t))
            }), e
        };
        return function(t) {
            return n(t) ? t : e(t)
        }
    }(), 
    M = function() {
        var t = n(function(t, n) {
            return Array.isArray(t.get(n))
        }), e = function(n) {
            return A(n).every(t(n))
        }, u = function(n) {
            return A(n).filter(r(t(n)))
        };
        return function(t) {
            if (e(t))
                return t;
            var n = g(t);
            return u(n).forEach(function(t) {
                return n.set(t, [P.get(t), n.get(t)])
            }), n
        }
    }(), 
    y = function() {
        var t = n(function(t, n) {
            return t.get(n).some(l)
        }), e = function(n) {
            return !b(n).some(t(n))
        }, r = function(n) {
            return b(n).filter(t(n))
        };
        return function(t) {
            if (e(t))
                return t;
            var n = g(t);
            return r(t).forEach(function(t) {
                return n.set(t, n.get(t).map(h))
            }), n
        }
    }(), 
    I = function(t) {
        var n = g(t);
        return E(t).forEach(function(t) {
            return n.set(t, n.get(t).slice().reverse())
        }), n
    }, 
    w = e(f, d, M, y, function(t) {
        var n = g(t);
        return n.set("el", v(t.get("el"))), n
    }, 
    function(t) {
        return "reverse" == t.get("direction") ? I(t) : t
    }), 

    E = function() {
        var t = s(m), n = function(n) {
            return r(o)(t, n)
        };
        return function(t) {
            return s(t).filter(n)
        }
    }(), 
    O = function() {
        var t = e(a, p), r = n(function(n, e) {
            var r = n.get(e).map(x), u = r[0], a = r[1], r = new Map;
            return r.set("prop", e), r.set("from", u), r.set("to", a), r.set("isTransformFunction", q(e)), r.set("isColor", r.get("isTransformFunction") ? !1 : t(n.get(e))), /\d$/.test(n.get("easing")) ? (u = n.get("easing").split(" "), a = u[1], r.set("easing", u[0]), r.set("frequency", a)) : r.set("easing", n.get("easing")), r
        });
        return function(t, n) {
            return E(t).map(r(t))
        }
    }(), 
    A = function() {
        var t = function(t) {
            return o(C, t)
        };
        return function(n) {
            return s(n).filter(t)
        }
    }(),
     b = function(t) {
        return c(E(t), A(t))
    },

    C = "opacity translateX translateY scale rotate scaleX scaleY rotateX rotateY perspective skewX skewY translateZ rotateZ scaleZ".split(" "), 
    P = new Map;
    console.log(C);

    C.forEach(function(t) {
        return P.set(t, o(["opacity", "scale", "scaleX", "scaleY"], t) ? 1 : 0)
    });


    var k = function(t) {
        var n = A(t);
        if (n.length) {
            var e = [];
            n.some(q) && e.push("transform"), o(n, "opacity") && e.push("opacity");
            var r = e.join();
            t.get("el").forEach(function(t) {
                t.style.willChange || (t.style.willChange = r)
            })
        }
    }, 
    q = function() {
        var t = C.filter(function(t) {
            return "opacity" != t
        });
        return function(n) {
            return o(t, n)
        }
    }(), 
    Q = function(t, n) {
        return t.reduce(function(t, e, r) {
            return e = e + "(" + B(e, n[r]) + ")", t ? t + " " + e : e
        }, null)
    }, 
    B = function() {
        return function(t, n) {
            return /\D$/.test(n) || /scale/.test(t) ? n : /rotate|skew/.test(t) ? n + "deg" : n + "px"
        }
    }(), 
    T = function(t, n) {
        return n.reduce(function(n, e, r) {
            return n + t[r - 1] + e
        })
    }, 
    x = function() {
        var t = /-?\d*\.?\d+/g;
        return function(n) {
            var e = new Map;
            return e.set("digits", ("string" == typeof n ? n : String(n)).match(t).map(Number)), e.set("others", ("string" == typeof n ? n : String(n)).split(t)), e
        }
    }(), 
    S = n(function(t, n, e) {
        var r = e.get("to").get("digits").map(function(r, a) {
            var i = e.get("from").get("digits")[a];
            if (i == r)
                return i;
            var o = r - i, i = u[e.get("easing")](n, i, o, t.get("duration"), e.get("frequency"));
            return e.get("isColor") ? Math.round(i) : i
        });
        return T(r, e.get("to").get("others"))
    }), 
    F = n(function(t, n) {
        var e = t.get(n.get("prop"));
        return a(e.slice(-1))
    }), 
    X = function() {
        var t = void 0;
        return n(function(n, e, r) {
            var u = void 0;
            n.forEach(function(t, n) {
                t.get("isTransformFunction") ? (u || (u = new Map, u.set("functions", []), u.set("values", [])), u.get("functions").push(t.get("prop")), u.get("values").push(e[n])) : "opacity" == t.get("prop") ? r.style.opacity = e[n] : r.setAttribute(t.get("prop"), e[n])
            }), u && (t || (t = "transform" in document.body.style ? "transform" : "-webkit-transform"), r.style[t] = Q(u.get("functions"), u.get("values")))
        })
    }(), 
    Y = function() {
        var t = function(t, n) {
            n.get("begin") && n.get("begin")(n.get("el")), requestAnimationFrame(t)
        };
        return function(n, e) {
            return e.get("delay") ? setTimeout(function() {
                return t(n, e)
            }, e.get("delay")) : t(n, e)
        }
    }(), 
    N = function(t) {
        return j(function() {
            if ("alternate" == t.get("direction"))
                return I(t);
            if ("reverse" == t.get("direction")) {
                var n = g(t);
                return n["delete"]("direction"), n
            }
            return t
        }())
    }, 
    Z = new Map, $ = function() {
        var t = 0;
        return function(n) {
            var e = t++, r = g(Z);
            return r.set(e, n), Z = r, e
        }
    }(), 
    j = function(t) {
        var n = w(t),
        e = O(n), 
        r = $(n.get("el")), 
        u = new Map;

        k(n), Y(function a(t) {
            if (Z.has(r)) {
                u.has("start") || u.set("start", t), u.set("elapsed", t - u.get("start")), t = u.get("elapsed") < n.get("duration");
                var i = e.map(t ? S(n, u.get("elapsed")) : F(n));
                Z.get(r).forEach(X(e, i)), t ? requestAnimationFrame(a) : (t = g(Z), t["delete"](r), Z = t, n.get("complete") && n.get("complete")(n.get("el")), n.get("loop") && N(n))
            }
        }, n)
    };

    return j.stop = function(t) {
            var n = v(t), 
                e = g(Z);
                e.forEach(function(t, r) {
                    var u = c(t, n);

                u.length ? e.set(r, u) : e["delete"](r)
                }), 
                Z = e
            },
            j
    }();



"undefined" != typeof module && module.exports && (module.exports = animate);

console.log("undefined" != typeof module && module.exports && (module.exports = animate) )
